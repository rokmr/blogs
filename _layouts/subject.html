---
layout: default
---

<article class="subject-page wide-layout">
    <header class="page-header">
        <nav class="breadcrumb">
            <a href="{{ '/notes/' | relative_url }}">Notes</a>
            <span class="sep">/</span>
            <span class="current">{{ page.title }}</span>
        </nav>
        <h1>{{ page.title }}</h1>
        {% if page.description %}
        <p class="description">{{ page.description }}</p>
        {% endif %}
    </header>

    <div class="page-content">
        {% assign subject_slug = page.subject_slug %}
        {% assign subject_notes = site.notes | where_exp: "note", "note.path contains subject_slug" %}

        {% assign subject_level_notes = "" | split: "" %}
        {% for note in subject_notes %}
        {% assign path_parts = note.path | split: "/" %}
        {% if path_parts.size == 3 %}
        {% assign subject_level_notes = subject_level_notes | push: note %}
        {% endif %}
        {% endfor %}

        <!-- Topic Cards Grid -->
        <div class="topics-grid">
            {% for sub in page.sub_subjects %}
            {% assign sub_notes_list = "" | split: "" %}
            {% for note in subject_notes %}
            {% assign path_parts = note.path | split: "/" %}
            {% if path_parts.size >= 4 and path_parts[2] == sub %}
            {% unless note.url contains '/index' %}
            {% assign sub_notes_list = sub_notes_list | push: note %}
            {% endunless %}
            {% endif %}
            {% endfor %}
            {% assign sub_notes_count = sub_notes_list.size %}

            <a href="{{ '/notes/' | append: subject_slug | append: '/' | append: sub | append: '/' | relative_url }}"
                class="topic-card{% if sub_notes_count == 0 %} empty{% endif %}">
                <h3>{{ sub | replace: "-", " " | capitalize }}</h3>
                <span class="count">
                    {% if sub_notes_count > 0 %}
                    {{ sub_notes_count }} note{% if sub_notes_count != 1 %}s{% endif %}
                    {% else %}
                    Coming soon
                    {% endif %}
                </span>
            </a>
            {% endfor %}
        </div>

        {% if subject_level_notes.size > 0 %}
        <section class="general-notes">
            <h2>General Notes</h2>
            <div class="notes-grid">
                {% for note in subject_level_notes %}
                <a href="{{ note.url | relative_url }}" class="note-card">
                    <h3>{{ note.title }}</h3>
                    {% if note.description %}
                    <p>{{ note.description | strip_html | truncate: 100 }}</p>
                    {% endif %}
                </a>
                {% endfor %}
            </div>
        </section>
        {% endif %}
    </div>
</article>

<style>
    .subject-page {
        width: 100%;
    }

    .page-header {
        margin-bottom: 2rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid var(--border);
    }

    .page-header h1 {
        font-size: 2rem;
        font-weight: 700;
        margin: 0.5rem 0;
        color: var(--text);
    }

    .page-header .description {
        color: var(--text-secondary);
        margin: 0;
    }

    /* Breadcrumb */
    .breadcrumb {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.85rem;
        color: var(--dim);
    }

    .breadcrumb a {
        color: var(--dim);
    }

    .breadcrumb a:hover {
        color: var(--accent);
    }

    .breadcrumb .sep {
        opacity: 0.5;
    }

    .breadcrumb .current {
        color: var(--text);
    }

    /* Topics Grid */
    .topics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1rem;
    }

    .topic-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 6px;
        padding: 1.5rem;
        text-decoration: none;
        text-align: center;
        transition: all 0.2s;
    }

    .topic-card:hover {
        border-color: var(--accent);
        transform: translateY(-2px);
    }

    .topic-card.empty {
        opacity: 0.5;
    }

    .topic-card.empty:hover {
        transform: none;
        border-color: var(--border);
    }

    .topic-card h3 {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 0.5rem;
    }

    .topic-card:hover h3 {
        color: var(--accent);
    }

    .topic-card .count {
        font-family: var(--font-mono);
        font-size: 0.7rem;
        color: var(--dim);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    /* General Notes */
    .general-notes {
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border);
    }

    .general-notes h2 {
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--dim);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin: 0 0 1rem;
    }

    .notes-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1rem;
    }

    .note-card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 6px;
        padding: 1.25rem;
        text-decoration: none;
        transition: all 0.2s;
    }

    .note-card:hover {
        border-color: var(--accent);
        transform: translateY(-2px);
    }

    .note-card h3 {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text);
        margin: 0 0 0.5rem;
    }

    .note-card:hover h3 {
        color: var(--accent);
    }

    .note-card p {
        font-size: 0.85rem;
        color: var(--text-secondary);
        margin: 0;
        line-height: 1.4;
    }

    @media (max-width: 600px) {
        .topics-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .notes-grid {
            grid-template-columns: 1fr;
        }
    }
</style>